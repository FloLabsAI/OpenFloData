# =============================================================================
# OpenFloData Environment Configuration
# =============================================================================
# Docker Compose will automatically load values from this file.
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# These are used by both the streamer and API services to connect to PostgreSQL

DB_HOST=postgres                  # Use 'postgres' for docker-compose, 'localhost' for local dev
DB_PORT=5432
DB_NAME=volve_production
DB_USER=flodata
DB_PASSWORD=flodata_secret

# PostgreSQL container initialization (used by postgres service in docker-compose)
POSTGRES_USER=flodata
POSTGRES_PASSWORD=flodata_secret
POSTGRES_DB=volve_production

# -----------------------------------------------------------------------------
# Streaming Configuration (Clock-Synchronized Real-Time)
# -----------------------------------------------------------------------------
# The streamer maps historical Volve data to real-time using a day offset.
# Streaming is always synchronized to real-world clock: 1 hour per hour.

# START_OFFSET_DAYS: Maps "today 00:00" to N days from first date in source data
#   How it works:
#     - Source data starts at 2007-09-01 (day 0)
#     - Day 0 + offset days = the day that maps to today
#     - All hours are synchronized: source hour X â†’ today hour X
#   Examples:
#     0   = 2007-09-01 maps to today (batch loads all history, streams from beginning)
#     365 = 2008-08-31 maps to today (batch loads 365 days, streams from day 365+)
#     730 = 2009-09-01 maps to today (batch loads 730 days, streams from day 730+)
START_OFFSET_DAYS=365

# BATCH_SIZE_HOURS: Hours per batch during initial historical data loading
#   Larger = faster initial load but more memory
#   168 hours = 7 days per batch (good balance)
BATCH_SIZE_HOURS=168

# CATCHUP_THRESHOLD_HOURS: Enter catch-up mode if stream is more than X hours behind
#   When the streamer falls behind (e.g., after restart), it will fast-forward
CATCHUP_THRESHOLD_HOURS=2

# CATCHUP_BATCH_HOURS: Hours to stream per batch during catch-up mode
#   Higher = faster catch-up, but more memory usage
CATCHUP_BATCH_HOURS=24

# -----------------------------------------------------------------------------
# DuckDB Source Configuration
# -----------------------------------------------------------------------------
# Path to the DuckDB file containing Volve production data

DUCKDB_PATH=/app/data/prod_hourly_data.duckdb

# -----------------------------------------------------------------------------
# Timezone Configuration
# -----------------------------------------------------------------------------
# All timestamps will be displayed in this timezone

TZ=Asia/Kuala_Lumpur
